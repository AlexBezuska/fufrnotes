/*
  Design tokens + base components.
  This file is concatenated into the Tailwind build input by tools/build-css.sh.
*/

@layer base {
  :root {
    /* Brand palette (Fairyloss)
      Inspired by the header illustration (lavender sky, pink clouds, gold moon/stars, mint sparkles).
    */
    --whimsy-twilight-lavender: #bca9d6;
    --whimsy-dream-lilac: #d8c9ee;
    --whimsy-cloud-pink: #f2b6d4;
    --whimsy-cloud-blush: #fad2e6;
    --whimsy-moon-gold: #e8c51a;
    --whimsy-starlight-butter: #fff2a8;
    --whimsy-sparkle-mint: #bff2e7;
    --whimsy-snowglow: #ffffff;
    --whimsy-ink-plum: #2f1937;
    --whimsy-ink-plum-muted: #553660;

    /* App tokens (mapped to brand palette) */
    --bg: var(--whimsy-twilight-lavender);
    --surface: color-mix(in srgb, var(--whimsy-snowglow) 92%, var(--whimsy-cloud-blush) 8%);
    --surface-2: color-mix(in srgb, var(--whimsy-snowglow) 82%, var(--whimsy-dream-lilac) 18%);
    --border: color-mix(in srgb, var(--whimsy-ink-plum) 14%, var(--whimsy-dream-lilac) 86%);
    --border-strong: color-mix(in srgb, var(--whimsy-ink-plum) 22%, var(--whimsy-dream-lilac) 78%);
    --text: var(--whimsy-ink-plum);
    --text-muted: var(--whimsy-ink-plum-muted);

    --accent: var(--whimsy-moon-gold);
    --accent-soft: var(--whimsy-starlight-butter);

    /* Friendly accents for UI */
    --bubblegum-pink: var(--whimsy-cloud-pink);
    --bubblegum-lavender: var(--whimsy-dream-lilac);
    --bubblegum-mint: var(--whimsy-sparkle-mint);

    /* Tabs */
    --tab-shadow: 0 1px 0 rgba(47, 25, 55, 0.10), 0 8px 24px rgba(47, 25, 55, 0.10);
    --tab-notes-active: var(--whimsy-starlight-butter);
    --tab-projects-active: var(--whimsy-cloud-blush);
    --tab-active-border: color-mix(in srgb, var(--whimsy-ink-plum) 18%, var(--whimsy-dream-lilac) 82%);

    /* Typography */
    --font: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    --text-base: 16px;
    --leading-base: 1.5;

    /* Spacing (8px grid) */
    --space-1: 8px;
    --space-2: 16px;
    --space-3: 24px;
    --space-4: 32px;

    /* Radius + shadow (single style) */
    --radius-card: 12px;
    --shadow-card: theme('boxShadow.sm');

    /* Focus ring */
    --focus-ring: 0 0 0 3px var(--accent-soft);
  }

  html, body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--font);
    font-size: var(--text-base);
    line-height: var(--leading-base);
  }
}

@layer components {
  .ui-alert {
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
    padding: 8px 12px;
    font-size: theme('fontSize.sm');
    line-height: theme('lineHeight.5');
  }

  .ui-alert-info {
    background: theme('colors.sky.50');
    border-color: theme('colors.sky.200');
    color: theme('colors.sky.800');
  }

  .ui-alert-success {
    background: theme('colors.emerald.50');
    border-color: theme('colors.emerald.200');
    color: theme('colors.emerald.800');
  }

  .ui-alert-warning {
    background: theme('colors.orange.50');
    border-color: theme('colors.orange.200');
    color: theme('colors.orange.900');
  }

  .ui-alert-danger {
    background: theme('colors.red.50');
    border-color: theme('colors.red.200');
    color: theme('colors.red.800');
  }

  .ui-appbar {
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    box-shadow: var(--shadow-card);
  }

  .ui-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-card);
  }

  .ui-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
  }

  .ui-divider {
    border-color: var(--border);
  }

  .ui-input {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
    padding: 8px 16px;
    color: var(--text);
  }

  .ui-btn {
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
    padding: 8px 16px;
    color: var(--text);
  }

  .ui-btn:hover {
    filter: brightness(0.98);
  }

  .ui-btn-primary {
    background: var(--accent);
    border: 1px solid var(--accent);
    border-radius: var(--radius-card);
    padding: 8px 16px;
    color: theme('colors.white');
    font-weight: 600;
  }

  .ui-btn-primary:hover {
    filter: brightness(0.97);
  }

  .ui-btn-danger {
    background: var(--surface);
    border: 1px solid theme('colors.red.300');
    border-radius: var(--radius-card);
    padding: 8px 16px;
    color: theme('colors.red.700');
  }

  .ui-focus:focus {
    outline: none;
    box-shadow: var(--focus-ring);
  }

  .ui-note-item {
    display: block;
    width: 100%;
    text-align: left;
    background: var(--surface);
    border: 1px solid var(--border-strong);
    border-radius: var(--radius-card);
    padding: 16px;
    box-shadow: var(--shadow-card);
    border-left-width: 4px;
    border-left-color: transparent;
  }

  .ui-note-item:hover {
    background: theme('colors.slate.50');
  }

  .ui-note-item.is-active {
    background: theme('colors.orange.50');
    border-color: theme('colors.orange.200');
    border-left-color: var(--accent);
  }

  .ui-loadingbar {
    height: 3px;
    background: var(--accent);
    width: 100%;
  }

  .ui-checkbox {
    width: 22px;
    height: 22px;
    accent-color: var(--accent);
  }

  .ui-tabs {
    display: inline-flex;
    gap: 4px;
    padding: 4px;
    border: 1px solid var(--border-strong);
    border-radius: var(--radius-card);
    background: var(--surface-2);
    box-shadow: var(--tab-shadow);
  }

  .ui-tab {
    appearance: none;
    border: 1px solid transparent;
    border-radius: calc(var(--radius-card) - 4px);
    padding: 8px 14px;
    background: transparent;
    color: var(--text-muted);
    font-weight: 700;
    line-height: 1;
  }

  .ui-tab:hover {
    filter: brightness(0.99);
  }

  .ui-tab.is-active {
    color: var(--text);
    border-color: var(--tab-active-border);
    box-shadow: 0 1px 0 rgba(47, 25, 55, 0.10);
  }

  #navNotesBtn.ui-tab.is-active {
    background: var(--tab-notes-active);
  }

  #navProjectsBtn.ui-tab.is-active {
    background: var(--tab-projects-active);
  }
}
